drop table TABLA_EJEMPLO;

CREATE TABLE CUSTOMER
(
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) NOT NULL PRIMARY KEY,
    NAME VARCHAR2(255) NOT NULL CONSTRAINT CUSTOMER_UK UNIQUE
);

CREATE TABLE INVOICE
(
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) NOT NULL PRIMARY KEY,
    CUSTOMER_ID INTEGER REFERENCES CUSTOMER(ID),
    DATE_CREATED DATE NOT NULL,
    TOTAL NUMBER(10,2) NOT NULL
);

CREATE INDEX INVOICE_CUSTOMER_IDX ON INVOICE(CUSTOMER_ID);

CREATE TABLE INVOICE_LINE
(
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) NOT NULL PRIMARY KEY,
    INVOICE_ID INTEGER REFERENCES INVOICE(ID),
    DETAIL VARCHAR2(4000) NOT NULL,
    TOTAL NUMBER(10,2) NOT NULL
);

CREATE INDEX INVOICE_LINE_INVOICE_IDX ON INVOICE_LINE(INVOICE_ID);
